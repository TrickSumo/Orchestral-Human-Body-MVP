<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./img/orc_logo.webp" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Orchestral Human Body</title>
    <meta name="keyword" content="AI genereated melody" />
    <meta
      name="description"
      content="Experience The Groundbreaking Initiative Combining Health, Technology,
    And The Universal Language Of Music"
    />
    <meta name="image" content="./orc_logo.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <script src="osc.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/javascript">
      var sendOSC = function (name, ...args) {
        var data = osc.writePacket({ address: name, args: args });
        var ep = Module.oscDriver[57110];
        var rcv = ep ? ep["receive"] : undefined;
        if (typeof rcv == "function") rcv(57120, data);
      };
      var sendOSC_t = function (name, tags, ...args) {
        for (i = 0; i < args.length; i++) {
          args[i] = { type: tags[i], value: args[i] };
        }
        var data = osc.writePacket(
          { address: name, args: args },
          { metadata: true }
        );
        var ep = Module.oscDriver[57110];
        var rcv = ep ? ep["receive"] : undefined;
        if (typeof rcv == "function") rcv(57120, data);
      };
      // the binary SynthDef blob
      var bubblesDef = Uint8Array.from([
        83, 67, 103, 102, 0, 0, 0, 1, 0, 1, 13, 65, 110, 97, 108, 111, 103, 66,
        117, 98, 98, 108, 101, 115, 0, 7, 0, 0, 0, 0, 64, 64, 0, 0, 66, -96, 0,
        0, 65, -64, 0, 0, 61, 35, -41, 10, 62, 76, -52, -51, 64, -128, 0, 0, 0,
        3, 62, -52, -52, -51, 65, 0, 0, 0, 63, 103, 92, 41, 0, 3, 5, 102, 114,
        101, 113, 49, 0, 0, 5, 102, 114, 101, 113, 50, 0, 1, 6, 100, 101, 116,
        117, 110, 101, 0, 2, 0, 18, 7, 67, 111, 110, 116, 114, 111, 108, 1, 0,
        0, 0, 3, 0, 0, 1, 1, 1, 5, 76, 70, 83, 97, 119, 2, 0, 2, 0, 1, 0, 0, 0,
        0, 0, 0, -1, -1, 0, 0, 2, 12, 66, 105, 110, 97, 114, 121, 79, 112, 85,
        71, 101, 110, 1, 0, 2, 0, 1, 0, 2, 0, 0, 0, 1, 0, 0, 0, 2, 1, 5, 76, 70,
        83, 97, 119, 2, 0, 2, 0, 1, 0, 0, 0, 2, 0, 0, -1, -1, 0, 0, 2, 6, 77,
        117, 108, 65, 100, 100, 2, 0, 3, 0, 1, 0, 0, 0, 3, 0, 0, -1, -1, 0, 1,
        -1, -1, 0, 2, 2, 6, 77, 117, 108, 65, 100, 100, 2, 0, 3, 0, 1, 0, 0, 0,
        1, 0, 0, -1, -1, 0, 3, 0, 4, 0, 0, 2, 11, 85, 110, 97, 114, 121, 79,
        112, 85, 71, 101, 110, 2, 0, 1, 0, 1, 0, 17, 0, 5, 0, 0, 2, 6, 83, 105,
        110, 79, 115, 99, 2, 0, 2, 0, 1, 0, 0, 0, 6, 0, 0, -1, -1, 0, 0, 2, 12,
        66, 105, 110, 97, 114, 121, 79, 112, 85, 71, 101, 110, 2, 0, 2, 0, 1, 0,
        2, 0, 7, 0, 0, -1, -1, 0, 4, 2, 5, 67, 111, 109, 98, 78, 2, 0, 4, 0, 1,
        0, 0, 0, 8, 0, 0, -1, -1, 0, 5, -1, -1, 0, 5, -1, -1, 0, 6, 2, 5, 76,
        70, 83, 97, 119, 2, 0, 2, 0, 1, 0, 0, 0, 0, 0, 1, -1, -1, 0, 0, 2, 6,
        77, 117, 108, 65, 100, 100, 2, 0, 3, 0, 1, 0, 0, 0, 10, 0, 0, -1, -1, 0,
        1, -1, -1, 0, 2, 2, 6, 77, 117, 108, 65, 100, 100, 2, 0, 3, 0, 1, 0, 0,
        0, 1, 0, 0, -1, -1, 0, 3, 0, 11, 0, 0, 2, 11, 85, 110, 97, 114, 121, 79,
        112, 85, 71, 101, 110, 2, 0, 1, 0, 1, 0, 17, 0, 12, 0, 0, 2, 6, 83, 105,
        110, 79, 115, 99, 2, 0, 2, 0, 1, 0, 0, 0, 13, 0, 0, -1, -1, 0, 0, 2, 12,
        66, 105, 110, 97, 114, 121, 79, 112, 85, 71, 101, 110, 2, 0, 2, 0, 1, 0,
        2, 0, 14, 0, 0, -1, -1, 0, 4, 2, 5, 67, 111, 109, 98, 78, 2, 0, 4, 0, 1,
        0, 0, 0, 15, 0, 0, -1, -1, 0, 5, -1, -1, 0, 5, -1, -1, 0, 6, 2, 3, 79,
        117, 116, 2, 0, 3, 0, 0, 0, 0, -1, -1, 0, 0, 0, 16, 0, 0, 0, 9, 0, 0, 0,
        0,
      ]);
      var dumpOSC = function (code) {
        code = code ? code : 1;
        sendOSC_t("/dumpOSC", "i", code);
      };
      var cmdPeriod = function () {
        sendOSC_t("/g_freeAll", "i", 0);
      };
      // send the "AnalogBubbles" synth-def to the server
      var d_bubbles = function () {
        sendOSC_t("/d_recv", "b", bubblesDef);
      };
      // start a synth with the "AnalogBubbles" synth-def
      var s_bubbles = function () {
        cmdPeriod();
        sendOSC_t("/s_new", "siii", "AnalogBubbles", 1000, 1, 0);
      };

      // var boot = function () {
      //   var args = Module["arguments"];
      //   args[args.indexOf("-o") + 1] = "2";
      //   console.log(args[args.indexOf("-o") + 1]);
      //   console.log("args are", args);
      //   console.log("booting");
      //   Module.callMain(args);
      //   // d_bubbles();
      // };

      var play = function () {
        console.log("playing");
        sendOSC_t("/s_new", "siii", "air", 1000, 1, 0);

        // s_bubbles();
      };

      var stop = function () {
        console.log("stopping");
        cmdPeriod();
      };
    </script>
    <!-- <script>
      window.bootSuperCollider = function () {
        console.log("This is a globally defined function!");
        var args = Module["arguments"];
        args[args.indexOf("-o") + 1] = "2";
        console.log(args[args.indexOf("-o") + 1]);
        console.log("args are", args);
        console.log("booting");
        Module.callMain(args);
        d_bubbles();
      };
    </script> -->
    <script type="text/javascript">
      var statusElement = document.getElementById("status");
      var progressElement = document.getElementById("progress");
      var bootElement = document.getElementById("boot");
      var Module = {
        preRun: [],
        postRun: [],
        printErr: function (text) {
          if (arguments.length > 1)
            text = Array.prototype.slice.call(arguments).join(" ");
          console.error(text);
        },
        monitorRunDependencies: function (left) {},
        onRuntimeInitialized: function () {
          console.log("onRuntimeInitialized - Web Assembly is ready!");
          // setTimeout(() => {
          //   boot();
          // }, 3000);
        },
      };
      window.onerror = function (event) {};
    </script>

    <script async type="text/javascript" src="scsynth.js"></script>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
